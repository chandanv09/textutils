<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
.scroll-area {
  width: 100%;
  overflow-x: scroll;         /* enable swipe scroll on mobile */
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;      /* hide default scrollbar (Firefox) */
}
.scroll-area::-webkit-scrollbar {
  display: none;              /* hide default scrollbar (Chrome) */
}

.content {
  display: flex;
  gap: 20px;
  width: max-content;
}

.box {
  min-width: 250px;
  padding: 40px;
  background: #ddd;
  border-radius: 10px;
}

.custom-scrollbar {
  width: 100%;
  height: 8px;
  background: #ccc;
  margin-top: 12px;
  border-radius: 6px;
  position: relative;
}

.thumb {
  width: 60px;
  height: 100%;
  background: #333;
  border-radius: 6px;
  position: absolute;
  left: 0;
  cursor: pointer;
}




</style>
<body>
<div class="scroll-area">
  <div class="content">
    <div class="box">Box 1</div>
    <div class="box">Box 2</div>
    <div class="box">Box 3</div>
    <div class="box">Box 4</div>
    <div class="box">Box 5</div>
  </div>
</div>

<div class="custom-scrollbar">
  <div class="thumb"></div>
</div>






<script>
const area = document.querySelector(".scroll-area");
const content = document.querySelector(".content");
const bar = document.querySelector(".custom-scrollbar");
const thumb = document.querySelector(".thumb");

let dragging = false;
let startX = 0;
let startLeft = 0;

// ------------------------
// Resize thumb dynamically
// ------------------------
function updateThumbSize() {
  const ratio = area.clientWidth / content.scrollWidth;
  const width = Math.max(40, bar.clientWidth * ratio);
  thumb.style.width = width + "px";
}

updateThumbSize();
window.addEventListener("resize", updateThumbSize);

// ------------------------
// Thumb drag start
// ------------------------
thumb.addEventListener("mousedown", startDrag);
thumb.addEventListener("touchstart", startDrag, { passive: true });

function startDrag(e) {
  dragging = true;

  let pageX = e.pageX || e.touches[0].pageX;

  startX = pageX;
  startLeft = parseFloat(getComputedStyle(thumb).left);
}

// ------------------------
// Desktop mouse move
// ------------------------
document.addEventListener("mousemove", function (e) {
  if (!dragging) return;
  moveThumb(e.pageX);
});

// ------------------------
// Mobile touch move (passive:false)
// ------------------------
document.addEventListener("touchmove", function (e) {
  if (!dragging) return;

  e.preventDefault(); // FIX: allow custom drag on mobile

  moveThumb(e.touches[0].pageX);
}, { passive: false });

// ------------------------
// Move thumb & scroll content
// ------------------------
function moveThumb(pageX) {
  const dx = pageX - startX;

  let newLeft = startLeft + dx;
  const maxLeft = bar.clientWidth - thumb.clientWidth;

  if (newLeft < 0) newLeft = 0;
  if (newLeft > maxLeft) newLeft = maxLeft;

  thumb.style.left = newLeft + "px";

  const scrollRatio = newLeft / maxLeft;
  const maxScroll = content.scrollWidth - area.clientWidth;

  area.scrollLeft = scrollRatio * maxScroll;
}

// ------------------------
// Stop dragging
// ------------------------
document.addEventListener("mouseup", () => dragging = false);
document.addEventListener("touchend", () => dragging = false);

// ------------------------
// Content scroll (mobile swipe) â†’ Move thumb
// ------------------------
area.addEventListener("scroll", function () {
  const maxScroll = content.scrollWidth - area.clientWidth;
  const scrollRatio = area.scrollLeft / maxScroll;

  const maxLeft = bar.clientWidth - thumb.clientWidth;
  thumb.style.left = scrollRatio * maxLeft + "px";
});

</script>
</body>
</html>
